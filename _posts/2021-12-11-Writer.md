---
layout: post
title: HackTheBox Writer Write-up
---

<h2>Overview</h2>

Writer is a medium-rated Linux machine on HackTheBox. I find a website vulnerable to SQL injection, which allows file reading of a file containing credentials.
I'm able to connect to SMB using these credentials, and upload a modified manager.py containing a reverse shell, granting me shell as www-data. Following this, a number of privilege escalations are made.
As www-data, I first discover credentials to the MySQL database, which contains the user kyle's hashed password. Cracking it allows me to ssh in as kyle. As kyle, I discover I'm in a group with privileges to modify the /etc/postfix/disclaimer file, and
I inject a reverse shell command which triggers a reverse shell as john when I send an email to john. As john, I find I'm in a group with write access to /etc/apt/apt.conf.d. I create an apt configuration file with reverse shell code, and get a reverse shell as root.

<!--more-->

<h2>Initial Enumeration</h2>




SQL Injection
  File read
    smb credentials in "/var/www/writer.htb/writer/__init__.py"
    
SMB access as kyle
  updating manager.py with python reverse shell
 
Shell as www-data
  running linpeas reveals MySQL creds
  enumerating databases reveals kyle's hashed password
  cracking the hash gives password. SSH in
  
Shell as kyle
  check groups
  check files belonging to the group
  modify /etc/postfix/disclaimer with a reverse shell
  get a reverse shell as john + read john's ssh key

Shell as john
  check groups again
  check files belonging to the group
  write a malicious apt conf file to give reverse shell
  get a reverse shell as root
